
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>three.js webgl - geometry - dynamic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  </head>
  <body>

    <div id="container"></div>

    <script src="THREE-r71.min.js"></script>
    <script src="Stats.js"></script>
    <script src="FirstPersonControls.js"></script>
    <script src="OBJLoader.js"></script>
    <script src="MTLLoader.js"></script>
    <script src="OBJMTLLoader.js"></script>
    <script src="ColladaLoader.js"></script>
    <script src="jquery.min.js"></script>
    <script src="game_3d.js"></script>
    <script src="ShaderParticleUtils.js"></script>
    <script src="ShaderParticleGroup.js"></script>
    <script src="ShaderParticleEmitter.js"></script>
    <script src="water-material.js"></script>
    

    // <script>

    //   var container;

    //   var camera, scene, renderer;

    //   var mesh, texture, geometry, material;

    //   var worldWidth = 128, worldDepth = 128,
    //   worldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2;

    //   var clock = new THREE.Clock();

    //   init();
    //   animate();

    //   function init() {

    //     container = document.getElementById( 'container' );

    //     camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 20000 );
    //     camera.position.z = 75;
    //     camera.position.y = 20;

    //     // controls = new THREE.FirstPersonControls( camera );

    //     // controls.movementSpeed = 500;
    //     // controls.lookSpeed = 0.1;

    //     scene = new THREE.Scene();

    //     load_models();

    //     geometry = new THREE.SphereGeometry( 250, 70, 40 );
    //     geometry.rotateX( - Math.PI / 2 );

    //     geometry_old = geometry.clone();

    //     var light = new THREE.AmbientLight( 0xffffff ); // soft white light
    //     scene.add( light );

    //     dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
    //     dirLight.color.setHSL( 0.1, 1, 0.95 );
    //     dirLight.position.set( -1, 1.75, 1 );
    //     dirLight.position.multiplyScalar( 50 );
    //     scene.add( dirLight );

    //     dirLight.castShadow = true;

    //     dirLight.shadowMapWidth = 1048;
    //     dirLight.shadowMapHeight = 1048;

    //     var d = 50;

    //     dirLight.shadowCameraLeft = -d;
    //     dirLight.shadowCameraRight = d;
    //     dirLight.shadowCameraTop = d;
    //     dirLight.shadowCameraBottom = -d;

    //     dirLight.shadowCameraFar = 3500;
    //     dirLight.shadowBias = -0.0001;
    //     dirLight.shadowDarkness = 0.35;
    //     dirLight.shadowCameraVisible = true;
    //     scene.add( dirLight );

    //     var material = new THREE.MeshPhongMaterial( { color: 0x00AAff, specular: 0xffffff, shininess: 20, morphTargets: true, vertexColors: THREE.FaceColors, shading: THREE.FlatShading, transparent: true, opacity: 0.5 } );

    //     // mesh = new THREE.Mesh( geometry, material );
    //     // mesh.receiveShadow = true;
    //     // scene.add( mesh );

    //     renderer = new THREE.WebGLRenderer();
    //     renderer.setClearColor( 0xaaccff );
    //     renderer.setPixelRatio( window.devicePixelRatio );
    //     renderer.setSize( window.innerWidth - 25, window.innerHeight - 25 );

    //     container.innerHTML = "";

    //     container.appendChild( renderer.domElement );

    //     window.addEventListener( 'resize', onWindowResize, false );

    //     stats = new Stats();
    //     stats.setMode( 0 ); // 0: fps, 1: ms, 2: mb

    //     // align top-left
    //     stats.domElement.style.position = 'absolute';
    //     stats.domElement.style.left = '0px';
    //     stats.domElement.style.top = '0px';

    //     document.body.appendChild( stats.domElement );

    //   }

    //   function load_models() {
    //     var loader = new THREE.OBJMTLLoader();

    //     // load an obj / mtl resource pair
    //     loader.crossOrigin = 'anonymous';
    //     loader.load(
    //       // OBJ resource URL
    //       'models/Mark_42.obj',
    //       // MTL resource URL
    //       'models/Mark_42.mtl',
    //       // Function when both resources are loaded
    //       function ( object ) {
    //         mesh = object;
    //         mesh.rotateX(-Math.PI / 2);
    //         mesh.rotateY(Math.PI);
    //         mesh.position.z = -60;
    //         mesh.scale.x = 2;
    //         mesh.scale.y = 2;
    //         mesh.scale.z = 2;
    //         scene.add( object );
    //       }
    //     );

    //     loader.load(
    //       // OBJ resource URL
    //       'models/Su-47_Berkut.obj',
    //       // MTL resource URL
    //       'models/Su-47_Berkut.mtl',
    //       // Function when both resources are loaded
    //       function ( object ) {
    //         object.rotateX(-Math.PI / 2);
    //         scene.add( object );
    //       },
    //       // Function called when downloads progress
    //       function ( xhr ) {
    //         console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
    //       },
    //       // Function called when downloads error
    //       function ( xhr ) {
    //         console.log( 'An error happened' );
    //       }
    //     );


    //     // var loader = new THREE.ColladaLoader();

    //     // loader.load(
    //     //   // resource URL
    //     //   'models/Ironman.dae',
    //     //   // Function when resource is loaded
    //     //   function ( collada ) {
    //     //     scene.add( collada.scene );
    //     //   },
    //     //   // Function called when download progresses
    //     //   function ( xhr ) {
    //     //     console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
    //     //   }
    //     // );
    //   }

    //   function onWindowResize() {

    //     camera.aspect = window.innerWidth / window.innerHeight;
    //     camera.updateProjectionMatrix();
    //     // controls.handleResize();

    //     renderer.setSize( window.innerWidth, window.innerHeight );

    //   }

    //   //

    //   function animate() {

    //     requestAnimationFrame( animate );

    //     render();

    //     stats.update();

    //   }

    //   function render() {

    //     // var delta = clock.getDelta(),
    //     //   time = clock.getElapsedTime() * 10;

    //     // var nx, ny, nz;

    //     // for ( var i = 0, l = geometry.vertices.length; i < l; i ++ ) {
    //     //   nx = mesh.position.x - geometry.vertices[i].x;
    //     //   ny = mesh.position.y - geometry.vertices[i].y;
    //     //   nz = mesh.position.z - geometry.vertices[i].z;
    //     //   l = Math.sqrt(nx*nx + ny*ny+ nz*nz);
    //     //   nx /= l;
    //     //   ny /= l;
    //     //   nz /= l;
    //     //   geometry.vertices[ i ].y = 100 * Math.sin( i / 5 + ( time + i ) / 7 ) / 10;
    //     // }

    //     // mesh.geometry.verticesNeedUpdate = true;

    //     // mesh.rotateX += Math.PI / 10;
    //     // mesh.rotateY += Math.PI / 10;
    //     // mesh.rotateZ += Math.PI / 10;
    //     // controls.update( delta );
    //     renderer.render( scene, camera );

    //   }

    // </script>

  </body>
</html>
